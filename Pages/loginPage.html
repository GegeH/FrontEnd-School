<!DOCTYPE html>
<link href="bootstrap/css/bootstrap.css" rel="stylesheet" />
<link href="bootstrap/css/bootstrap-theme.css" rel="stylesheet" />
<script src="bootstrap/js/jquery-3.2.1.min.js" type="text/javascript"></script>
<script src="bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<link href="Site/SiteCss.css" rel="stylesheet" />
<section class="login-info">
    <div class="container">
        <div class="row main">
            <div class="form-header">
                <h1 class="text-center ">Welcome</h1>
            </div>
            <div class="main-content">
            
                <div class="input-group ">
                    <span class="input-group-addon"><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span></span>
                    <input id="txtId" type="text" class="form-control"  placeholder="Enter your Id ">
                </div>
                <div class="input-group">
                    <span class="input-group-addon"><span class="glyphicon glyphicon-lock" aria-hidden="true"></span></span>
                    <input id="password" type="password" class="form-control" name="password" placeholder="Enter your Password">
                </div>
        
                <!--<div class="checkbox">
                    <label class="remember">
                        <input name="remember" type="checkbox" > Remember Me
                    </label>
                </div>-->
          
                <div class="form-group ">
                    <a href="#" type="button"  class="btn btn-primary btn-lg btn-block login-button" id="btnLogin">login</a>
                </div>
          
            </div>
        </div>
    </div>
</section>


<script>

    $("#password").keyup(function (event) {
        if (event.keyCode == 13) {
            $("#btnLogin").click();
        }
    });
   $("#btnLogin").click(function() {
       var data = {}
       data.Id = $("#txtId").val();
       data.Password = $("#password").val();
         $.ajax({
            type: 'POST',
            url: 'http://localhost:5794/api/values',
            data: JSON.stringify(data),
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                console.log(data);
                if (data != null) {
                   
                    if (data.Role == 0 && data.Progress < 40) {
                        // indicate it's a student
                        console.log("hi");
                        window.location.href = "skillTestingPage.html?Id="+data.Id;
                    }
                    if (data.Role == 1) {
                        // indicate it's a teacher
                        window.location.href = "Teacher.html";
                    }
                } else {
                    alert("Please enter the correct id and password");
                }
               
            }
        });
    });
</script>